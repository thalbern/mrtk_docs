<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Input Simulation | UXT Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Input Simulation | UXT Documentation ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href=".././Docs/Images/uxt_favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src=".././Docs/Images/uxt_logo_icon.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="input-simulation">Input Simulation</h1>

<p>Input simulation is using mouse and keyboard input in the editor to simulate a Head-Mounted Display (HMD) as well as
hand tracking and other features. This allows testing Mixed-Reality features, such as buttons and interactions, without
a physical device.</p>
<p>Input simulation is not intended as a long term substitute for actual hardware, but as a development tool to improve
iteration times and allow testing in case of limited hardware availability. Input simulation is only enabled in the
Unreal editor.</p>
<h2 id="activation">Activation</h2>
<p>Input simulation will become active when playing in the Unreal editor and no head-mounted display (HMD) is connected. If a HMD is connected the input simulation is disabled and camera placement is controlled by the device.</p>
<h2 id="controls">Controls</h2>
<p>Default controls for moving the camera are based on the DefaultPawn:</p>
<ul>
<li>W/S keys for moving forward/backward</li>
<li>A/D keys for moving sideways</li>
<li>Q/E keys for moving down/up</li>
<li>Mouse movement controls head rotation</li>
</ul>
<p>In addition to default pawn movement there are virtual hands that can be controlled for simulating hand tracking:</p>
<ul>
<li><p>Hold Left Shift/Alt for controlling the left/right hand respectively.</p>
<p>This disables head rotation with the mouse and moves the hand instead. Both hands can be controlled together by holding both control keys.</p>
</li>
<li><p>T/Y keys for toggling hand visibility.</p>
<p>UX Tools project settings contain an option to &quot;Start with Hands Enabled&quot;. Hands can still be enabled with the T/Y keys even if they are not initially visible.</p>
</li>
<li><p>Press the Left mouse button to perform a &quot;Pinch&quot; gesture. This also activates the &quot;grasp&quot; state of the hand controller, allowing object manipulation.</p>
</li>
<li><p>Press the Middle mouse button to perform a &quot;Poke&quot; gesture. This can be used for poking buttons.</p>
<p>Note that buttons can also be pressed by simply moving the hand towards the button, without performing any gestures.</p>
</li>
<li><p>Holding the Right mouse button enables rotation of the controlled hands:</p>
<ul>
<li>X axis changes yaw angle.</li>
<li>Y axis changes pitch angle.</li>
<li>Scroll wheel changes roll angle.</li>
</ul>
<p>To reset the hand rotation press the visibility keys (T/Y) twice. This will reset the hand location and rotation to defaults.</p>
</li>
</ul>
<h2 id="hand-animation">Hand Animation</h2>
<p>Hand input is simulated with skeletal meshes that are animated according to user input.</p>
<ol>
<li>The main input simulation actor adds two instances of the skeletal hand mesh for the left and right hand
respectively. The mesh asset is expected to model the right hand, while the left hand mesh is mirrored on the Y axis.</li>
<li>An animation blueprint is used to toggle between different possible hand poses, such as a default relaxed hand, poking
with the index finger, or pinching between thumb and index finger. Changing the current pose is bound to user input,
usually the left and middle mouse buttons. The animation blueprint handles transition and blending between poses.</li>
<li>After the mesh animation, the input simulation actor reads the position and rotation of bones matching the relevant
hand joints by name (see EWMRHandKeypoint enum). This data is then passed to the input simulation subsystem to emulate
device data when requested.</li>
</ol>
<h3 id="updating-hand-animation-assets">Updating Hand Animation Assets</h3>
<ol>
<li>The hand animation is best created from an FBX file. The file should contain:
<ul>
<li><p>A mesh model for the right hand.</p>
</li>
<li><p>A skeleton that animates the mesh.</p>
</li>
<li><p>Bones in the skeleton that match the EWMRHandKeypoint enum by name: Palm, Wrist, ThumbMetacarpal, ThumbProximal,
ThumbDistal, ThumbTip, IndexMetacarpal, etc..</p>
<p>Note that these bones do not necessarily have to deform the mesh, they only define the simulated joint positions.
However, the joint bones should be aligned with the visible mesh to avoid confusion.</p>
</li>
<li><p>Animation poses for the relevant hand gestures: Flat, Relaxed, Poke, Pinch, Grab, PalmUp, etc.</p>
</li>
</ul>
</li>
<li>The FBX file is imported, generating a mesh, skeleton, material(s), and animation assets.</li>
<li>Open the hand animation asset that contains the desired hand poses. With <code>Create Asset &gt; Create PoseAsset &gt; Current Animation</code> create a pose asset that can blend between the various hand poses.</li>
<li>Open the new pose asset and rename the relevant poses with meaningful names, e.g. &quot;Flat&quot;, &quot;Relaxed&quot;, &quot;Pinch&quot;, &quot;Poke&quot;.</li>
<li>Open the <code>InputSimulationHands_AnimInstance</code> asset. This is the animation blueprint that drives the skeletal
animation. In the AnimGraph find the PoseAsset blend node and in the Details panel change the linked pose asset to the one
created above.</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://dev.azure.com/MRDevPlat/DevPlat/_git/MixedRealityUtils-UE?path=Docs/InputSimulation.md&amp;version=GBuser/bethalha/doc_script&amp;line=1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
