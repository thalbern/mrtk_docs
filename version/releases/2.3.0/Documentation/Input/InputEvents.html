<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Input events | Mixed Reality Toolkit Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Input events | Mixed Reality Toolkit Documentation ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href="../.././Documentation/Images/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../.././Documentation/Images/mrt_logo_icon.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="input-events">Input events</h1>

<p>The list below outlines all available input event interfaces to be implemented by a custom MonoBehaviour component. These interfaces will be called by the MRTK input system to handle custom app logic based on user input interactions. <a href="Pointers.html#pointer-event-interfaces">Pointer input events</a> are handled slightly differently than the standard input event types below.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>By default, a script will receive input events only if it is the GameObject in focus by a pointer or parent of a GameObject in focus.</p>
</div>
<table>
<thead>
<tr>
<th>Handler</th>
<th style="text-align: center;">Events</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealitySourceStateHandler.html"><code>IMixedRealitySourceStateHandler</code></a></td>
<td style="text-align: center;">Source Detected / Lost</td>
<td>Raised when an input source is detected/lost, like when an articulated hand is detected or lost track of.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealitySourcePoseHandler.html"><code>IMixedRealitySourcePoseHandler</code></a></td>
<td style="text-align: center;">Source Pose Changed</td>
<td>Raised on source pose changes. The source pose represents the general pose of the input source. Specific poses, like the grip or pointer pose in a six DOF controller, can be obtained via <code>IMixedRealityInputHandler&lt;MixedRealityPose&gt;</code>.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputHandler.html"><code>IMixedRealityInputHandler</code></a></td>
<td style="text-align: center;">Input Down / Up</td>
<td>Raised on changes to binary inputs like buttons.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputHandler-1.html"><code>IMixedRealityInputHandler&lt;T&gt;</code></a></td>
<td style="text-align: center;">Input Changed</td>
<td>Raised on changes to inputs of the given type. <strong>T</strong> can take the following values: <br> - <em>float</em> (e.g returns analog trigger)<br> - <em>Vector2</em> (e.g returns gamepad thumbstick direction) <br> - <em>Vector3</em> (e.g return position of tracked device) <br> - <em>Quaternion</em> (e.g returns orientation of tracked device)<br> - <a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Utilities.MixedRealityPose.html">MixedRealityPose</a> (e.g. returns fully tracked device)</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealitySpeechHandler.html"><code>IMixedRealitySpeechHandler</code></a></td>
<td style="text-align: center;">Speech Keyword Recognized</td>
<td>Raised on recognition of one of the keywords configured in the <em>Speech Commands Profile</em>.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityDictationHandler.html"><code>IMixedRealityDictationHandler</code></a></td>
<td style="text-align: center;">Dictation<br> Hypothesis <br> Result <br> Complete <br> Error</td>
<td>Raised by dictation systems to report the results of a dictation session.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityGestureHandler.html"><code>IMixedRealityGestureHandler</code></a></td>
<td style="text-align: center;">Gesture events on: <br> Started <br> Updated <br> Completed <br> Canceled</td>
<td>Raised on gesture detection.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityGestureHandler-1.html"><code>IMixedRealityGestureHandler&lt;T&gt;</code></a></td>
<td style="text-align: center;">Gesture Updated / Completed</td>
<td>Raised on detection of gestures containing additional data of the given type. See <a href="Gestures.html#gesture-events"><strong>gesture events</strong></a> for details on possible values for <strong>T</strong>.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityHandJointHandler.html"><code>IMixedRealityHandJointHandler</code></a></td>
<td style="text-align: center;">Hand Joints Updated</td>
<td>Raised by articulated hand controllers when hand joints are updated.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityHandMeshHandler.html"><code>IMixedRealityHandMeshHandler</code></a></td>
<td style="text-align: center;">Hand Mesh Updated</td>
<td>Raised by articulated hand controllers when a hand mesh is updated.</td>
</tr>
<tr>
<td><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputActionHandler.html"><code>IMixedRealityInputActionHandler</code></a></td>
<td style="text-align: center;">Action Started / Ended</td>
<td>Raise to indicate action start and end for inputs mapped to actions.</td>
</tr>
</tbody>
</table>
<h2 id="input-events-in-action">Input events in action</h2>
<p>At the script level, input events can be consumed by implementing one of the event handler interfaces shown in the table above. When an input event fires via a user interaction, the following takes place:</p>
<ol>
<li>The MRTK input system recognizes that an input event has occurred.</li>
<li>The MRTK input system fires the relevant interface function of the input event to all <a href="#register-for-global-input-events">registered global input handlers</a></li>
<li>For every active pointer registered with the input system:
<ol>
<li>The input system determines which GameObject is in focus for the current pointer.</li>
<li>The input system utilizes <a href="https://docs.unity3d.com/Manual/EventSystem.html">Unity's event system</a> to fire the relevant interface function for all matching components on the focused GameObject.</li>
<li>If at any point an input event has been <a href="#how-to-stop-input-events">marked as used</a>, the process will end and no further GameObjects will receive callbacks.
<ul>
<li>Example: Components implementing the interface <a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealitySpeechHandler.html"><code>IMixedRealitySpeechHandler</code></a> will be searched for when a speech command is recognized.</li>
<li>Note: The Unity event system will bubble up to search the parent GameObject if no components matching the desired interface are found on the current GameObject.</li>
</ul>
</li>
</ol>
</li>
<li>If no global input handlers are registered and no GameObject is found with a matching component/interface, then the input system will call each fallback registered input handler</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p><a href="Pointers.html#pointer-event-interfaces">Pointer input events</a> are handled in a slightly different manner than the input event interfaces listed above. In particular, pointer input events are handled only by the GameObject in focus by the pointer that fired the input event - as well as any global input handlers. Regular input events are handled by GameObjects in focus for all active pointers.</p>
</div>
<h3 id="input-event-interface-example">Input event interface example</h3>
<p>The code below demonstrates use of the <a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealitySpeechHandler.html"><code>IMixedRealitySpeechHandler</code></a> interface. When the user says the words &quot;smaller&quot; or &quot;bigger&quot; while focusing on a GameObject with this <code>ShowHideSpeechHandler</code> class, the GameObject will scale itself by half or twice as much.</p>
<pre><code class="lang-c#">public class ShowHideSpeechHandler : MonoBehaviour, IMixedRealitySpeechHandler
{
    ...

    void IMixedRealitySpeechHandler.OnSpeechKeywordRecognized(SpeechEventData eventData)
    {
        if (eventData.Command.Keyword == &quot;smaller&quot;)
        {
            transform.localScale *= 0.5f;
        }
        else if (eventData.Command.Keyword == &quot;bigger&quot;)
        {
            transform.localScale *= 2.0f;
        }
    }
}
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p><a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.IMixedRealitySpeechHandler.html"><code>IMixedRealitySpeechHandler</code></a> input events require that the desired keywords are pre-registered in the <a href="Speech.html">MRTK Speech Commands Profile</a>.</p>
</div>
<h2 id="register-for-global-input-events">Register for global input events</h2>
<p>To create a component that listens for global input events, disregarding what GameObject may be in focus, a component must register itself with the Input System. Once registered, any instances of this MonoBehaviour will receive input events along with any GameObject(s) currently in focus and other global registered listeners.</p>
<p>If an input event has been <a href="#how-to-stop-input-events">marked as used</a>, global registered handlers will still all receive callbacks. However, no focused GameObjects will receive the event.</p>
<h3 id="global-input-registration-example">Global input registration example</h3>
<pre><code class="lang-c#">public class GlobalHandListenerExample : MonoBehaviour,
    IMixedRealitySourceStateHandler, // Handle source detected and lost
    IMixedRealityHandJointHandler // handle joint position updates for hands
{
    private void OnEnable()
    {
        // Instruct Input System that we would like to receive all input events of type
        // IMixedRealitySourceStateHandler and IMixedRealityHandJointHandler
        CoreServices.InputSystem?.RegisterHandler&lt;IMixedRealitySourceStateHandler&gt;(this);
        CoreServices.InputSystem?.RegisterHandler&lt;IMixedRealityHandJointHandler&gt;(this);
    }

    private void OnDisable()
    {
        // This component is being destroyed
        // Instruct the Input System to disregard us for input event handling
        CoreServices.InputSystem?.UnregisterHandler&lt;IMixedRealitySourceStateHandler&gt;(this);
        CoreServices.InputSystem?.UnregisterHandler&lt;IMixedRealityHandJointHandler&gt;(this);
    }

    // IMixedRealitySourceStateHandler interface
    public void OnSourceDetected(SourceStateEventData eventData)
    {
        var hand = eventData.Controller as IMixedRealityHand;

        // Only react to articulated hand input sources
        if (hand != null)
        {
            Debug.Log(&quot;Source detected: &quot; + hand.ControllerHandedness);
        }
    }

    public void OnSourceLost(SourceStateEventData eventData)
    {
        var hand = eventData.Controller as IMixedRealityHand;

        // Only react to articulated hand input sources
        if (hand != null)
        {
            Debug.Log(&quot;Source lost: &quot; + hand.ControllerHandedness);
        }
    }

    public void OnHandJointsUpdated(
                InputEventData&lt;IDictionary&lt;TrackedHandJoint, MixedRealityPose&gt;&gt; eventData)
    {
        MixedRealityPose palmPose;
        if (eventData.InputData.TryGetValue(TrackedHandJoint.Palm, out palmPose))
        {
            Debug.Log(&quot;Hand Joint Palm Updated: &quot; + palmPose.Position);
        }
    }
}
</code></pre>
<h2 id="register-for-fallback-input-events">Register for fallback input events</h2>
<p>Fallback input handlers are similar to registered global input handlers but are treated as a last resort for input event handling. Only if no global input handlers were found and no GameObjects are in focus will fallback input handlers be leveraged.</p>
<h3 id="fallback-input-handler-example">Fallback input handler example</h3>
<pre><code class="lang-c#">public class GlobalHandListenerExample : MonoBehaviour,
    IMixedRealitySourceStateHandler // Handle source detected and lost
{
    private void OnEnable()
    {
        CoreServices.InputSystem?.PushFallbackInputHandler(this);
    }

    private void OnDisable()
    {
        CoreServices.InputSystem?.PopFallbackInputHandler();
    }

    // IMixedRealitySourceStateHandler interface
    public void OnSourceDetected(SourceStateEventData eventData)
    {
        ...
    }

    public void OnSourceLost(SourceStateEventData eventData)
    {
        ...
    }
}
</code></pre>
<h2 id="how-to-stop-input-events">How to stop input events</h2>
<p>Every input event interface provides a <a class="xref" href="../../api/Microsoft.MixedReality.Toolkit.Input.BaseInputEventData.html"><code>BaseInputEventData</code></a> data object as a parameter to each function on the interface. This event data object extends from Unity's own <a href="https://docs.unity3d.com/2019.1/Documentation/ScriptReference/EventSystems.AbstractEventData.html"><code>AbstractEventData</code></a>.</p>
<p>In order to stop an input event from propagating through its execution <a href="#input-events-in-action">as outlined</a>, a component can call <a href="https://docs.unity3d.com/2019.1/Documentation/ScriptReference/EventSystems.AbstractEventData.Use.html"><code>AbstractEventData.Use()</code></a> to mark the event as used. This will stop any other GameObjects from receiving the current input event, with the exception of global input handlers.</p>
<div class="NOTE">
<h5>Note</h5>
<p>A component that calls the <code>Use()</code> method will stop other GameObjects from receiving it. However, other components on the current GameObject will still receive the input event and fire any related interface functions.</p>
</div>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Pointers.html">Pointers</a></li>
<li><a href="Speech.html">Speech</a></li>
<li><a href="InputState.html">Input State</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Documentation/Input/InputEvents.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
